{% extends "mivs_base.html" %}
{% block body %}

<h2>Assign Judges to {{ game.title }}</h2>

<a class="return-link" href="index">Return to main judge/game list</a>

{% if game.reviews %}
    {{ game.title }} already has the following judges assigned:
    <table class="table">
    <thead>
        <tr>
            <th>Judge</th>
            <th>Video Review</th>
            <th>Game Review</th>
        </tr>
    </thead>
    <tbody>
        {% for review in game.reviews %}
            <tr>
                <td>{{ review.judge.full_name }}</td>
                <td>{{ review.video_status_label }}</td>
                <td>{{ review.game_status_label }}</td>
            </tr>
        {% endfor %}
    </tbody>
    </table>
{% else %}
    {{ game.title }} currently has no judges assigned to review it.
{% endif %}

{% if matching %}
    <h3>Judges matching {{ game.title }}'s genres</h3>

    The following judges have preferences which match {{ game.title }}'s listed genres ({{ game.genres_labels|join:' / ' }}).

    <table>
    {% for judge in matching %}
        <tr>
            <td><ul><li></li></ul></td>
            <td>{{ judge.full_name }}</td>
            <td>{{ judge.genres_labels|join:' / ' }}</td>
            <td>
                <form method="post" action="assign">
                    {% csrf_token %}
                    <input type="hidden" name="game_id" value="{{ game.id }}" />
                    <input type="hidden" name="judge_id" value="{{ judge.id }}" />
                    <input type="hidden" name="return_to" value="assign_judges?game_id={{ game.id }}" />
                    <input type="submit" value="Assign to {{ judge.full_name }} for Review" />
                </form>
            </td>
        </tr>
    {% endfor %}
    </table>
{% endif %}

{% if nonmatching %}
    <h3>Other Judges</h3>

    Below is a list of judges whose preferred genres do NOT match {{ game.title }}'s listed genres,
    who you may still assign to review this game anyway as you find appropriate:

    <table>
    {% for judge in nonmatching %}
        <tr>
            <td><ul><li></li></ul></td>
            <td>{{ judge.full_name }}</td>
            <td>{{ judge.genres_labels|join:' / ' }}</td>
            <td>
                <form method="post" action="assign">
                    {% csrf_token %}
                    <input type="hidden" name="game_id" value="{{ game.id }}" />
                    <input type="hidden" name="judge_id" value="{{ judge.id }}" />
                    <input type="hidden" name="return_to" value="assign_judges?game_id={{ game.id }}" />
                    <input type="submit" value="Assign to {{ judge.full_name }} for Review" />
                </form>
            </td>
        </tr>
    {% endfor %}
    </table>
{% endif %}

{% endblock %}
